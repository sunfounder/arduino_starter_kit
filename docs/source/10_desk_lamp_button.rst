.. note::

    ã“ã‚“ã«ã¡ã¯ã€SunFounderã®Raspberry Pi & Arduino & ESP32ãƒ•ã‚¡ãƒ³ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ã¸ã‚ˆã†ã“ãï¼Raspberry Piã€Arduinoã€ESP32ã«èˆˆå‘³ã®ã‚ã‚‹ä»²é–“ãŸã¡ã¨å…±ã«ã€ã•ã‚‰ã«æ·±ãæ¢æ±‚ã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚

    **ãªãœå‚åŠ ã™ã‚‹ã®ã‹ï¼Ÿ**

    - **å°‚é–€å®¶ã®ã‚µãƒãƒ¼ãƒˆ**: è³¼å…¥å¾Œã®å•é¡Œã‚„æŠ€è¡“çš„ãªèª²é¡Œã‚’ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ã‚„ãƒãƒ¼ãƒ ã®åŠ©ã‘ã‚’å€Ÿã‚Šã¦è§£æ±ºã§ãã¾ã™ã€‚
    - **å­¦ã³ã¨å…±æœ‰**: ã‚¹ã‚­ãƒ«ã‚’å‘ä¸Šã•ã›ã‚‹ãŸã‚ã®ãƒ’ãƒ³ãƒˆã‚„ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ã‚’äº¤æ›ã—ã¾ã—ã‚‡ã†ã€‚
    - **é™å®šãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼**: æ–°è£½å“ã®ç™ºè¡¨ã‚„äºˆå‘Šã‚’æ—©æœŸã«å…¥æ‰‹ã§ãã¾ã™ã€‚
    - **ç‰¹åˆ¥å‰²å¼•**: æœ€æ–°è£½å“ã®é™å®šå‰²å¼•ã‚’åˆ©ç”¨ã§ãã¾ã™ã€‚
    - **ãŠç¥­ã‚Šãƒ—ãƒ­ãƒ¢ãƒ¼ã‚·ãƒ§ãƒ³ã¨ã‚®ãƒ–ã‚¢ã‚¦ã‚§ã‚¤**: ã‚®ãƒ–ã‚¢ã‚¦ã‚§ã‚¤ã‚„ãƒ›ãƒªãƒ‡ãƒ¼ãƒ—ãƒ­ãƒ¢ãƒ¼ã‚·ãƒ§ãƒ³ã«å‚åŠ ã—ã¾ã—ã‚‡ã†ã€‚

    ğŸ‘‰ ä¸€ç·’ã«æ¢æ±‚ã—ã€å‰µé€ ã™ã‚‹æº–å‚™ã¯ã§ãã¾ã—ãŸã‹ï¼Ÿ[|link_sf_facebook|]ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦ä»Šã™ãå‚åŠ ã—ã¾ã—ã‚‡ã†ï¼

10. ON/OFFãƒ‡ã‚¹ã‚¯ãƒ©ãƒ³ãƒ—
====================================

ã“ã®ãƒ¬ãƒƒã‚¹ãƒ³ã§ã¯ã€èª¿å…‰å¯èƒ½ãªãƒ‡ã‚¹ã‚¯ãƒ©ãƒ³ãƒ—ã«ã‚¹ã‚¤ãƒƒãƒãƒœã‚¿ãƒ³ã‚’è¿½åŠ ã™ã‚‹ã“ã¨ã§ã€å‰å›ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’æ‹¡å¼µã—ã¾ã™ã€‚ã“ã®æ”¹è‰¯ã«ã‚ˆã‚Šã€å®Ÿéš›ã®ãƒ‡ã‚¹ã‚¯ãƒ©ãƒ³ãƒ—ã®ã‚ˆã†ã«ã‚ªãƒ³ã‚ªãƒ•ã‚’åˆ‡ã‚Šæ›¿ãˆã€ãã®å¾Œã«æ˜ã‚‹ã•ã‚’èª¿æ•´ã™ã‚‹æ©Ÿèƒ½ãŒè¿½åŠ ã•ã‚Œã€æ—¥å¸¸ã®ä½¿ç”¨ã«è¿‘ã„ã‚·ãƒŠãƒªã‚ªã‚’ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ãƒˆã—ã¾ã™ã€‚

.. image:: img/10_desk_lamp_button.jpg
    :width: 500
    :align: center

* ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ãƒ‡ãƒ¼ã‚¿è¡¨ç¤ºã®ãŸã‚ã®ã‚·ãƒªã‚¢ãƒ«ãƒ¢ãƒ‹ã‚¿ã®ä½¿ç”¨æ–¹æ³•ã‚’å­¦ã¶ã€‚
* ãƒœã‚¿ãƒ³å…¥åŠ›ã‚’åŠ¹ç‡çš„ã«ç®¡ç†ã™ã‚‹ãŸã‚ã®``INPUT_PULLUP``ãƒ¢ãƒ¼ãƒ‰ã®å®Ÿè£…ã€‚
* çŠ¶æ…‹ã®å¤‰åŒ–ã‚’æ¤œå‡ºã™ã‚‹æ–¹æ³•ã‚’ç†è§£ã™ã‚‹ã€‚
* ãƒ‡ã‚¸ã‚¿ãƒ«ä¿¡å·ã¨ã‚¢ãƒŠãƒ­ã‚°ä¿¡å·ã®ç‰¹æ€§ã‚’æ¢ã‚‹ã€‚
* æ¡ä»¶æ–‡ï¼ˆ``if else``ï¼‰ã®æ´»ç”¨ã€‚

å›è·¯ã®æ§‹ç¯‰
------------------------------------

**å¿…è¦ãªã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ**

.. list-table:: 
   :widths: 25 25 25 25
   :header-rows: 0

   * - 1 * Arduino Uno R3
     - 1 * èµ¤è‰²LED
     - 1 * 220Î©æŠµæŠ—
     - 1 * ãƒãƒ†ãƒ³ã‚·ãƒ§ãƒ¡ãƒ¼ã‚¿
   * - |list_uno_r3| 
     - |list_red_led| 
     - |list_220ohm| 
     - |list_potentiometer| 
   * - 1 * ãƒœã‚¿ãƒ³
     - 1 * USBã‚±ãƒ¼ãƒ–ãƒ«
     - 1 * ãƒ–ãƒ¬ãƒƒãƒ‰ãƒœãƒ¼ãƒ‰
     - ã‚¸ãƒ£ãƒ³ãƒ‘ãƒ¼ãƒ¯ã‚¤ãƒ¤ãƒ¼
   * - |list_button| 
     - |list_usb_cable| 
     - |list_breadboard| 
     - |list_wire| 


**æ§‹ç¯‰æ‰‹é †**

1. å‰å›ã®ãƒ¬ãƒƒã‚¹ãƒ³ã®ãƒ‡ã‚¹ã‚¯ãƒ©ãƒ³ãƒ—å›è·¯ã‹ã‚‰å§‹ã‚ã¾ã™ã€‚

.. image:: img/9_dimmer_led1_pin9.png
    :width: 500
    :align: center

2. ãƒœã‚¿ãƒ³ã‚’ãƒ–ãƒ¬ãƒƒãƒ‰ãƒœãƒ¼ãƒ‰ã®ä¸­å¤®ã®ã‚®ãƒ£ãƒƒãƒ—ã‚’ã¾ãŸã„ã§æŒ¿å…¥ã—ã€ãƒ”ãƒ³ã‚’6Eã€8Eã€6Jã€8Jã®ç©´ã«æŒ¿å…¥ã—ã¾ã™ã€‚

.. note::

    ãƒœã‚¿ãƒ³ã®æŒ¿å…¥æ–¹æ³•ãŒä¸æ˜ãªå ´åˆã¯ã€ä¸¡æ–¹ã®å‘ãã‚’è©¦ã—ã¦ã¿ã¦ãã ã•ã„ã€‚ä¸€æ–¹ã®å‘ãã§ã¯ã€ãƒ”ãƒ³ã®é–“éš”ãŒå°‘ã—ç‹­ãã¦åˆã‚ãªã„ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚

.. image:: img/10_desk_lamp_button_button.png
    :width: 500
    :align: center

3. ãƒœã‚¿ãƒ³ã®å·¦ä¸‹ã®ãƒ”ãƒ³ã‚’é•·ã„ã‚¸ãƒ£ãƒ³ãƒ‘ãƒ¼ãƒ¯ã‚¤ãƒ¤ãƒ¼ã§Arduino Uno R3ã®ãƒ‡ã‚¸ã‚¿ãƒ«ãƒ”ãƒ³7ã«æ¥ç¶šã—ã€ä¸€æ–¹ã®ç«¯ã‚’8Jã®ç©´ã«ã€ã‚‚ã†ä¸€æ–¹ã®ç«¯ã‚’ãƒ”ãƒ³7ã«æŒ¿å…¥ã—ã¾ã™ã€‚

.. image:: img/10_desk_lamp_button_p7.png
    :width: 500
    :align: center

4. ãƒœã‚¿ãƒ³ã®å³ä¸Šã®ãƒ”ãƒ³ã‚’çŸ­ã„ã‚¸ãƒ£ãƒ³ãƒ‘ãƒ¼ãƒ¯ã‚¤ãƒ¤ãƒ¼ã§ãƒ–ãƒ¬ãƒƒãƒ‰ãƒœãƒ¼ãƒ‰ã®è² ç«¯å­ã«æ¥ç¶šã—ã€ä¸€æ–¹ã®ç«¯ã‚’6Aã®ç©´ã«ã€ã‚‚ã†ä¸€æ–¹ã®ç«¯ã‚’è² ç«¯å­ã«æŒ¿å…¥ã—ã¾ã™ã€‚

.. image:: img/10_desk_lamp_button_gnd.png
    :width: 500
    :align: center


ã‚³ãƒ¼ãƒ‰ã®ä½œæˆ
-----------------

**ãƒœã‚¿ãƒ³ã®çŠ¶æ…‹ã‚’è¡¨ç¤º**

1. ä»¥å‰ä¿å­˜ã—ãŸã‚¹ã‚±ãƒƒãƒ ``Lesson9_Desk_Lamp`` ã‚’é–‹ãã€ã€Œåå‰ã‚’ä»˜ã‘ã¦ä¿å­˜...ã€ã‚’é¸æŠã—ã¦ ``Lesson10_Desk_Lamp_Button`` ã«åå‰ã‚’å¤‰æ›´ã—ã€ã€Œä¿å­˜ã€ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¾ã™ã€‚

2. ãƒ¬ãƒƒã‚¹ãƒ³8ã§ã¯ã€10Kãƒ—ãƒ«ãƒ€ã‚¦ãƒ³æŠµæŠ—ã‚’æ‰‹å‹•ã§GNDã¨ãƒœã‚¿ãƒ³ã®é–“ã«æ¥ç¶šã—ã¾ã—ãŸãŒã€ã“ã®å›è·¯ã§ã¯æŠµæŠ—ã‚’æ¥ç¶šã—ã¦ã„ã¾ã›ã‚“ã€‚ä»£ã‚ã‚Šã«ã€Arduinoã®ã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢ãƒ—ãƒ«ã‚¢ãƒƒãƒ—æ©Ÿèƒ½ã‚’ä½¿ç”¨ã—ã¾ã™ã€‚ãƒœã‚¿ãƒ³ã«æ¥ç¶šã•ã‚ŒãŸãƒ”ãƒ³ã‚’å…¥åŠ›ã«è¨­å®šã—ã€ ``PULLUP`` ã«è¨­å®šã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚

.. code-block:: Arduino
    :emphasize-lines: 6

    int potValue = 0;

    void setup() {
        // ã“ã“ã«åˆæœŸè¨­å®šã‚³ãƒ¼ãƒ‰ã‚’è¨˜è¿°ã—ã¾ã™ã€‚ãƒ—ãƒ­ã‚°ãƒ©ãƒ ãŒé–‹å§‹ã™ã‚‹ã¨1å›ã ã‘å®Ÿè¡Œã•ã‚Œã¾ã™:
        pinMode(9, OUTPUT);        // ãƒ”ãƒ³9ã‚’å‡ºåŠ›ã«è¨­å®š
        pinMode(7, INPUT_PULLUP);  // ãƒ”ãƒ³7ã‚’å†…éƒ¨ãƒ—ãƒ«ã‚¢ãƒƒãƒ—æŠµæŠ—ã§å…¥åŠ›ã«è¨­å®š
    }

3. ã‚·ãƒªã‚¢ãƒ«ãƒ¢ãƒ‹ã‚¿ã‚’åˆ©ç”¨ã™ã‚‹ã«ã¯ã€Arduino Uno R3ã§ã‚·ãƒªã‚¢ãƒ«é€šä¿¡ã‚’é–‹å§‹ã™ã‚‹ã‚³ãƒãƒ³ãƒ‰ã‚’å«ã‚ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚

ã“ã®ã‚³ãƒãƒ³ãƒ‰ã¯é€šå¸¸ã€ã‚¹ã‚±ãƒƒãƒã® ``void setup()`` ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã«é…ç½®ã•ã‚Œã¾ã™ã€‚ ``Serial.begin(baud)`` ã‚³ãƒãƒ³ãƒ‰ã¯ã‚·ãƒªã‚¢ãƒ«é€šä¿¡ã‚’é–‹å§‹ã—ã€ ``baud`` ã¯ã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ã‚¿ã¨Arduino Uno R3é–“ã®1ç§’ã‚ãŸã‚Šã®ãƒ‡ãƒ¼ã‚¿è»¢é€é€Ÿåº¦ã‚’è¡¨ã—ã¾ã™ã€‚ä¸€èˆ¬çš„ãªãƒœãƒ¼ãƒ¬ãƒ¼ãƒˆã¯9600ãƒ“ãƒƒãƒˆ/ç§’ã¨115200ãƒ“ãƒƒãƒˆ/ç§’ã§ã™ã€‚

.. code-block:: Arduino
    :emphasize-lines: 7

    int potValue = 0;

    void setup() {
        // put your setup code here, to run once:
        pinMode(9, OUTPUT);        // Set pin 9 as output
        pinMode(7, INPUT_PULLUP);  // Set pin 7 as input with an internal pull-up resistor
        Serial.begin(9600);        // Serial communication setup at 9600 baud
    }


4. ``void loop()`` ã«å…¥ã‚‹å‰ã«ã€ãƒœã‚¿ãƒ³ã¨LEDã®çŠ¶æ…‹ã‚’åˆæœŸåŒ–ã™ã‚‹ãŸã‚ã®å¤‰æ•°ã‚’2ã¤ä½œæˆã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚ãƒœã‚¿ãƒ³ãŒæŠ¼ã•ã‚Œã¦ã„ãªã„ã¨ãã«LEDãŒæ¶ˆç¯ã—ã¦ã„ã‚‹çŠ¶æ…‹ã«è¨­å®šã—ã€ãƒœã‚¿ãƒ³ã¯å†…éƒ¨ãƒ—ãƒ«ã‚¢ãƒƒãƒ—æŠµæŠ—ã‚’ä½¿ç”¨ã—ã¦ã„ã‚‹ãŸã‚ã€æŠ¼ã•ã‚Œã¦ã„ãªã„ã¨ãã¯HIGHã¨ã—ã¦èª­ã¿å–ã‚‰ã‚Œã¾ã™ã€‚

.. code-block:: Arduino
    :emphasize-lines: 2,3

    int potValue = 0;  // Variable to store the value read from the potentiometer
    int ledState = LOW;          // Initial state of the LED
    int lastButtonState = HIGH;  // the previous reading from the input pin

    void setup() {
        pinMode(9, OUTPUT);        // Set pin 9 as output
        pinMode(7, INPUT_PULLUP);  // Set pin 7 as input with an internal pull-up resistor
        Serial.begin(9600);        // Serial communication setup at 9600 baud
    }

5. æ¬¡ã«ã€ ``void loop()`` å†…ã§æœ€åˆã«ãƒœã‚¿ãƒ³ã®çŠ¶æ…‹ã‚’ ``digitalRead()`` ã‚’ä½¿ç”¨ã—ã¦èª­ã¿å–ã‚Šã€ãã®å€¤ã‚’ ``buttonState`` å¤‰æ•°ã«æ ¼ç´ã—ã¾ã™ã€‚

.. code-block:: Arduino
    :emphasize-lines: 2

    void loop() {
        int buttonState = digitalRead(7);  // Read the state of the button
    }
    
6. ã‚·ãƒªã‚¢ãƒ«ãƒ¢ãƒ‹ã‚¿ã‚’ä½¿ç”¨ã—ã¦ãƒ‡ãƒ¼ã‚¿ã‚’è¡¨ç¤ºã™ã‚‹æº–å‚™ãŒæ•´ã„ã¾ã—ãŸã€‚ ``Serial.print()`` ã‚’åˆ©ç”¨ã—ã¦ãƒ‡ãƒ¼ã‚¿ã‚„ãƒ†ã‚­ã‚¹ãƒˆã‚’è¡¨ç¤ºã—ã¾ã™ã€‚

ä½¿ã„æ–¹ã¯ä»¥ä¸‹ã®é€šã‚Šã§ã™ï¼š


    * ``Serial.print(val)`` ã¾ãŸã¯ ``Serial.print(val, format)``: ãƒ‡ãƒ¼ã‚¿ã‚’ã‚·ãƒªã‚¢ãƒ«ãƒãƒ¼ãƒˆã«äººé–“ãŒèª­ã¿å–ã‚Œã‚‹ASCIIãƒ†ã‚­ã‚¹ãƒˆã¨ã—ã¦å‡ºåŠ›ã—ã¾ã™ã€‚

    **ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿**
        - ``Serial``: ã‚·ãƒªã‚¢ãƒ«ãƒãƒ¼ãƒˆã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã€‚
        - ``val``: å‡ºåŠ›ã™ã‚‹å€¤ã€‚è¨±å®¹ãƒ‡ãƒ¼ã‚¿å‹ï¼šä»»æ„ã®ãƒ‡ãƒ¼ã‚¿å‹ã€‚

    **æˆ»ã‚Šå€¤**
        ``print()`` ã¯æ›¸ãè¾¼ã¾ã‚ŒãŸãƒã‚¤ãƒˆæ•°ã‚’è¿”ã—ã¾ã™ãŒã€ãã®æ•°ã‚’èª­ã¿å–ã‚‹ã®ã¯ä»»æ„ã§ã™ã€‚ãƒ‡ãƒ¼ã‚¿å‹ï¼šsize_tã€‚

ã“ã®ã‚³ãƒãƒ³ãƒ‰ã¯æ§˜ã€…ãªãƒ‡ãƒ¼ã‚¿å‹ã‚„ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã‚’è¡¨ç¾ã§ãã¾ã™ã€‚ä¾‹ãˆã°ï¼š

.. code-block:: Arduino

    Serial.print(78);                // "78"ã¨å‡ºåŠ›
    Serial.print(78, BIN);           // "1001110"ã¨å‡ºåŠ›
    Serial.print(1.23456);           // "1.23"ã¨å‡ºåŠ›
    Serial.print(1.23456, 0);        // "1"ã¨å‡ºåŠ›
    Serial.print('N');               // "N"ã¨å‡ºåŠ›
    Serial.print("Hello world.");    // "Hello world."ã¨å‡ºåŠ›

7. æ¬¡ã«ã€è¡¨ç¤ºã™ã‚‹ãƒ‡ãƒ¼ã‚¿ã«ã¤ã„ã¦ã®ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚’è¡¨ç¤ºã™ã‚‹ã‚³ãƒãƒ³ãƒ‰ã‚’ä½¿ç”¨ã—ã¾ã™ã€‚ã“ã‚Œã¯è¤‡æ•°ã®ãƒ‡ãƒ¼ã‚¿ã‚’ä¸€åº¦ã«åŒºåˆ¥ã™ã‚‹ã®ã«å½¹ç«‹ã¡ã¾ã™ã€‚

.. code-block:: Arduino
    :emphasize-lines: 3

    void loop() {
        int buttonState = digitalRead(7);  // Read the state of the button
        Serial.print("Button State: ");
    }

8. æ¬¡ã«ã€ ``buttonState`` å¤‰æ•°ã«æ ¼ç´ã•ã‚Œã¦ã„ã‚‹å€¤ã‚’è¡¨ç¤ºã—ã¾ã™ã€‚ã‚·ãƒªã‚¢ãƒ«ãƒ¢ãƒ‹ã‚¿ã§å„å‡ºåŠ›ã‚’æ–°ã—ã„è¡Œã«è¡¨ç¤ºã™ã‚‹ã«ã¯ã€ ``Serial.println()`` ã‚’ä½¿ç”¨ã—ã¦ã€å°åˆ·æ–‡ã®æœ«å°¾ã«æ”¹è¡Œæ–‡å­—ã‚’è¿½åŠ ã—ã¾ã™ã€‚

.. note::

    æ–‡å­—ã‚„æ–‡å­—åˆ—ï¼ˆå¼•ç”¨ç¬¦ã§å›²ã‚€å¿…è¦ãŒã‚ã‚Šã¾ã™ï¼‰ã‚’å°åˆ·ã™ã‚‹å ´åˆã¨ã€å¤‰æ•°ã‚’ç›´æ¥æŒ¿å…¥ã™ã‚‹å ´åˆã®é•ã„ã«æ³¨æ„ã—ã¦ãã ã•ã„ã€‚
    
.. code-block:: Arduino
    :emphasize-lines: 14

    int potValue = 0;  // Variable to store the value read from the potentiometer
    int ledState = LOW;          // Initial state of the LED
    int lastButtonState = HIGH;  // the previous reading from the input pin

    void setup() {
        pinMode(9, OUTPUT);        // Set pin 9 as output
        pinMode(7, INPUT_PULLUP);  // Set pin 7 as input with an internal pull-up resistor
        Serial.begin(9600);        // Serial communication setup at 9600 baud
    }

    void loop() {
        int buttonState = digitalRead(7);  // Read the state of the button
        Serial.print("Button State: ");
        Serial.println(buttonState);  // Print the current button state
    }

9. ã“ã“ã§ã€ã‚³ãƒ¼ãƒ‰ã¯æœ¬è³ªçš„ã«å®Œæˆã§ã™ã€‚ã€Œã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã€ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦ã‚³ãƒ¼ãƒ‰ã‚’Arduino Uno R3ã«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã—ã¾ã™ã€‚

    .. note::

        ãƒœãƒ¼ãƒ‰ã‹ã‚‰ã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ã‚¿ã«ãƒ‡ãƒ¼ã‚¿ãŒé€ä¿¡ã•ã‚Œã‚‹ãŸã³ã«ã€Arduino Uno R3ã®TX LEDãŒç‚¹æ»…ã™ã‚‹ã¯ãšã§ã™ã€‚

10. ãã®å¾Œã€Arduino IDEã®å³ä¸Šã«ã‚ã‚‹ã€Œã‚·ãƒªã‚¢ãƒ«ãƒ¢ãƒ‹ã‚¿ã€ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¾ã™ã€‚

    .. image:: img/10_dimmer_led_serial.png
        :align: center

11. ãƒ‡ãƒ¼ã‚¿ãŒæ–‡å­—åŒ–ã‘ã—ã¦è¡¨ç¤ºã•ã‚Œã‚‹å ´åˆã¯ã€ã‚³ãƒ¼ãƒ‰ã§è¨­å®šã—ãŸãƒœãƒ¼ãƒ¬ãƒ¼ãƒˆã«åˆã‚ã›ã¦ãƒœãƒ¼ãƒ¬ãƒ¼ãƒˆã‚’èª¿æ•´ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚

    .. image:: img/10_dimmer_led_serial_baud.png
        :align: center

12. ãƒœã‚¿ãƒ³ãŒæŠ¼ã•ã‚Œã¦ã„ãªã„ã¨ãã¯ã€Œ1ã€ãŒé€£ç¶šã—ã¦è¡¨ç¤ºã•ã‚Œã€ãƒœã‚¿ãƒ³ãŒæŠ¼ã•ã‚Œã‚‹ã¨ã€Œ0ã€ãŒé€£ç¶šã—ã¦è¡¨ç¤ºã•ã‚Œã‚‹ã“ã¨ãŒã‚ã‹ã‚Šã¾ã™ã€‚ã“ã‚Œã¯ã€ãƒ‡ã‚¸ã‚¿ãƒ«ä¿¡å·ã®ç‰¹å¾´ã§ã€çŠ¶æ…‹ãŒã€Œ0ã€ã¨ã€Œ1ã€ã®ã¿ã§ã‚ã‚‹ã“ã¨ã‚’ç¤ºã—ã¦ã„ã¾ã™ã€‚

**ãƒœã‚¿ãƒ³çŠ¶æ…‹ã®å¤‰åŒ–ã‚’æ¤œå‡º**

ã“ã®ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã§ã¯ã€ç°¡å˜ãªãƒœã‚¿ãƒ³ã§LEDã®ã‚ªãƒ³ã‚ªãƒ•ã‚’åˆ‡ã‚Šæ›¿ãˆã‚‹æ–¹æ³•ã‚’å­¦ã³ã¾ã™ã€‚ã“ã‚Œã¯ã€ãƒœã‚¿ãƒ³ã®çŠ¶æ…‹ãŒå¤‰åŒ–ã—ãŸç¬é–“ã‚’æ¤œå‡ºã™ã‚‹ã“ã¨ã‚’å«ã¿ã¾ã™ã€‚

1. ãƒœã‚¿ãƒ³ã®æŠ¼ä¸‹ã‚’ç›£è¦–ã™ã‚‹ã‚³ã‚¢æ©Ÿèƒ½ã‹ã‚‰å§‹ã‚ã¾ã—ã‚‡ã†ã€‚

ä»¥å‰ã«ã€ãƒœã‚¿ãƒ³ãŒæŠ¼ã•ã‚ŒãŸã‹ã©ã†ã‹ã‚’ãã®çŠ¶æ…‹ãŒ ``HIGH`` ã¾ãŸã¯ ``LOW`` ã§èª­ã¿å–ã‚‹æ–¹æ³•ã‚’å­¦ã³ã¾ã—ãŸã€‚ã—ã‹ã—ã€ã“ã®ãƒ¬ãƒƒã‚¹ãƒ³ã§ã¯ãƒœã‚¿ãƒ³ã‚’æŠ¼ã—ç¶šã‘ã‚‹å¿…è¦ãŒãªã„ã‚ˆã†ã«ã€å˜ä¸€ã®æŠ¼ä¸‹ã«å¿œç­”ã™ã‚‹ã“ã¨ã‚’ç›®æŒ‡ã—ã¾ã™ã€‚ã“ã‚Œã«ã¯ã€ãƒœã‚¿ãƒ³ã®çŠ¶æ…‹ãŒå¤‰åŒ–ã—ãŸã“ã¨ã‚’æ¤œå‡ºã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚

ã“ã‚Œã‚’é”æˆã™ã‚‹ãŸã‚ã«ã€ãƒœã‚¿ãƒ³ã®å‰å›ã®çŠ¶æ…‹ï¼ˆ ``lastButtonState`` ï¼‰ã‚’ç¾åœ¨ã®çŠ¶æ…‹ï¼ˆ ``buttonState`` ï¼‰ã¨æ¯”è¼ƒã™ã‚‹ ``if`` æ–‡ã‚’ä½¿ç”¨ã—ã¾ã™ã€‚è«–ç†æ¼”ç®—å­ ``&&`` ã‚’ã“ã“ã§ä½¿ç”¨ã—ã¦ã€ä¸¡æ–¹ã®æ¡ä»¶ãŒçœŸã§ã‚ã‚‹å ´åˆã« ``if`` æ–‡å†…ã®ã‚³ãƒ¼ãƒ‰ãƒ–ãƒ­ãƒƒã‚¯ãŒå®Ÿè¡Œã•ã‚Œã‚‹ã‚ˆã†ã«ã—ã¾ã™ã€‚

.. code-block:: Arduino
    :emphasize-lines: 7,8

    void loop() {
        int buttonState = digitalRead(7);  // Read the state of the button
        Serial.print("Button State: ");
        Serial.println(buttonState);  // Print the current button state
            
        // Check if button state has changed from the last loop iteration
        if (lastButtonState == HIGH && buttonState == LOW) {  // Button press detected
        }
    }

2. ãƒœã‚¿ãƒ³ãŒæŠ¼ã•ã‚ŒãŸã¨æ¤œå‡ºã•ã‚ŒãŸã¨ãã€LEDã®çŠ¶æ…‹ã‚’åˆ‡ã‚Šæ›¿ãˆã¾ã™ã€‚ã¤ã¾ã‚Šã€LEDãŒæ¶ˆç¯ã—ã¦ã„ãŸå ´åˆã¯ç‚¹ç¯ã—ã€ç‚¹ç¯ã—ã¦ã„ãŸå ´åˆã¯æ¶ˆç¯ã—ã¾ã™ã€‚ ``!`` æ¼”ç®—å­ã‚’ä½¿ç”¨ã—ã¦ledStateå¤‰æ•°ã®çŠ¶æ…‹ã‚’åè»¢ã•ã›ã¾ã™ã€‚

.. code-block:: Arduino
    :emphasize-lines: 8

    void loop() {
        int buttonState = digitalRead(7);  // Read the state of the button
        Serial.print("Button State: ");
        Serial.println(buttonState);  // Print the current button state
        
        // Check if button state has changed from the last loop iteration
        if (lastButtonState == HIGH && buttonState == LOW) {  // Button press detected
            ledState = !ledState;                               // Toggle LED state
        }
    }

3. ãƒœã‚¿ãƒ³ã®çŠ¶æ…‹ã‚’ç¢ºèªã—ã¦LEDã‚’æ›´æ–°ã—ãŸå¾Œã€ãƒœã‚¿ãƒ³ã®ç¾åœ¨ã®çŠ¶æ…‹ã‚’æ–°ã—ã„ã€Œæœ€å¾Œã«çŸ¥ã‚‰ã‚Œã¦ã„ã‚‹çŠ¶æ…‹ã€ã¨ã—ã¦è¨˜éŒ²ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚ã“ã®ã‚¹ãƒ†ãƒƒãƒ—ã¯æ¬¡ã®çŠ¶æ…‹å¤‰åŒ–ã‚’æ¤œå‡ºã™ã‚‹ãŸã‚ã«é‡è¦ã§ã™ã€‚

.. code-block:: Arduino
    :emphasize-lines: 10,11

    void loop() {
        int buttonState = digitalRead(7);  // ãƒœã‚¿ãƒ³ã®çŠ¶æ…‹ã‚’èª­ã¿å–ã‚‹
        Serial.print("Button State: ");
        Serial.println(buttonState);  // ç¾åœ¨ã®ãƒœã‚¿ãƒ³çŠ¶æ…‹ã‚’å‡ºåŠ›
        
        // ãƒœã‚¿ãƒ³çŠ¶æ…‹ãŒå‰å›ã®ãƒ«ãƒ¼ãƒ—ã®åå¾©ã‹ã‚‰å¤‰åŒ–ã—ãŸã‹ã©ã†ã‹ã‚’ç¢ºèª
        if (lastButtonState == HIGH && buttonState == LOW) {  // ãƒœã‚¿ãƒ³æŠ¼ä¸‹ãŒæ¤œå‡ºã•ã‚ŒãŸ
            ledState = !ledState;                               // LEDã®çŠ¶æ…‹ã‚’åˆ‡ã‚Šæ›¿ãˆ
        }
        lastButtonState = buttonState;  // lastButtonStateã‚’ç¾åœ¨ã®çŠ¶æ…‹ã«æ›´æ–°
        delay(200);                     // ã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼šç°¡å˜ãªã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢ãƒ‡ãƒã‚¦ãƒ³ã‚¹
    }

**ãƒãƒ†ãƒ³ã‚·ãƒ§ãƒ¡ãƒ¼ã‚¿ã§æ˜ã‚‹ã•ã‚’èª¿æ•´**

``ledState`` ãŒ ``HIGH`` ã®å ´åˆã€LEDã‚’ç‚¹ç¯ã•ã›ã‚‹ã ã‘ã§ãªãã€ãƒãƒ†ãƒ³ã‚·ãƒ§ãƒ¡ãƒ¼ã‚¿ã§æ˜ã‚‹ã•ã‚’èª¿æ•´ã§ãã‚‹ã‚ˆã†ã«ã—ã¾ã™ã€‚ã“ã‚Œã‚’å®Ÿè£…ã™ã‚‹æ–¹æ³•ã¯æ¬¡ã®é€šã‚Šã§ã™ï¼š

1. ãƒœã‚¿ãƒ³æŠ¼ä¸‹ã§LEDã®çŠ¶æ…‹ã‚’åˆ‡ã‚Šæ›¿ãˆã‚‹ ``if`` æ–‡ã®ç›´å¾Œã«ã€ ``ledState`` ãŒ ``HIGH`` ã§ã‚ã‚‹ã‹ã©ã†ã‹ã‚’ç¢ºèªã™ã‚‹åˆ¥ã® ``if`` æ–‡ã‚’è¿½åŠ ã—ã¾ã™ã€‚ã‚‚ã—ãã†ã§ã‚ã‚Œã°ã€ãƒãƒ†ãƒ³ã‚·ãƒ§ãƒ¡ãƒ¼ã‚¿ã®å€¤ã«åŸºã¥ã„ã¦LEDã®æ˜ã‚‹ã•ã‚’èª¿æ•´ã—ã¾ã™ã€‚

.. code-block:: Arduino
    :emphasize-lines: 10,12

    void loop() {
        int buttonState = digitalRead(7);  // Read the state of the button
        Serial.print("Button State: ");
        Serial.println(buttonState);  // Print the current button state
        
        // Check if button state has changed from the last loop iteration
        if (lastButtonState == HIGH && buttonState == LOW) {  // Button press detected
            ledState = !ledState;                               // Toggle LED state
        }
        if (ledState == HIGH) {

        }
        lastButtonState = buttonState;  // Update lastButtonState to the current state
        delay(200);                     // Optional: Simple software debouncing
    }

2. ``if (ledState == HIGH)``ãƒ–ãƒ­ãƒƒã‚¯ã®ä¸­ã§ã€ãƒãƒ†ãƒ³ã‚·ãƒ§ãƒ¡ãƒ¼ã‚¿ã®å€¤ã‚’èª­ã¿å–ã£ã¦æ˜ã‚‹ã•ãƒ¬ãƒ™ãƒ«ã‚’æ±ºå®šã—ã¾ã™ã€‚æ¬¡ã«ã€ ``analogWrite()`` ã‚’ä½¿ç”¨ã—ã¦ã“ã®å€¤ã‚’é©ç”¨ã—ã€LEDã®æ˜ã‚‹ã•ã‚’èª¿æ•´ã—ã¾ã™ã€‚ã¾ãŸã€ã‚·ãƒªã‚¢ãƒ«ãƒ¢ãƒ‹ã‚¿ã«ã“ã®å€¤ã‚’ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã§ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ã™ã‚‹ãŸã‚ã«å‡ºåŠ›ã—ã¾ã™ã€‚

.. code-block:: Arduino
    :emphasize-lines: 6-9

    // Check if button state has changed from the last loop iteration
    if (lastButtonState == HIGH && buttonState == LOW) {  // Button press detected
        ledState = !ledState;                               // Toggle LED state
    }
    if (ledState == HIGH) {
        potValue = analogRead(A0);  // Continuously read value from potentiometer when LED is on
        analogWrite(9, potValue / 4);  // Adjust brightness continuously
        Serial.print("Pot Value: ");
        Serial.println(potValue);
    }
    lastButtonState = buttonState;  // Update lastButtonState to the current state
    delay(200);                     // Optional: Simple software debouncing

3. ``ledState``ãŒ ``LOW`` ã®å ´åˆã€LEDã‚’ã‚ªãƒ•ã«ã™ã‚‹ãŸã‚ã® ``else`` æ–‡ã‚’ ``if`` ãƒ–ãƒ­ãƒƒã‚¯ã®å¾Œã«è¿½åŠ ã—ã¾ã™ã€‚ã“ã‚Œã«ã‚ˆã‚Šã€ ``if`` ã®æ¡ä»¶ãŒæº€ãŸã•ã‚Œãªã„å ´åˆã«LEDã‚’å®Œå…¨ã«ã‚ªãƒ•ã«ã—ã¾ã™ã€‚

.. image:: img/if_else.png
    :width: 400
    :align: center

.. code-block:: Arduino
    :emphasize-lines: 6-8

    if (ledState == HIGH) {
        potValue = analogRead(A0);  // Continuously read value from potentiometer when LED is on
        analogWrite(9, potValue / 4);  // Adjust brightness continuously
        Serial.print("Pot Value: ");
        Serial.println(potValue);
    } else {
        analogWrite(9, 0);  // Adjust brightness continuously
    }
    
**ã‚³ãƒ¼ãƒ‰ã®å®Ÿè¡Œ**

ã‚³ãƒ¼ãƒ‰ãŒå®Œæˆã—ãŸã®ã§ã€å…¨ä½“ã®ãƒªã‚¹ãƒˆã¯æ¬¡ã®ã‚ˆã†ã«ãªã‚Šã¾ã™ï¼š

.. code-block:: Arduino

    int potValue = 0;            // Variable to store the value read from the potentiometer
    int ledState = LOW;          // Initial state of the LED
    int lastButtonState = HIGH;  // the previous reading from the input pin

    void setup() {
        pinMode(9, OUTPUT);        // Set pin 9 as output
        pinMode(7, INPUT_PULLUP);  // Set pin 7 as input with an internal pull-up resistor
        Serial.begin(9600);        // Serial communication setup at 9600 baud
    }

    void loop() {
        int buttonState = digitalRead(7);  // Read the state of the button
        Serial.print("Button State: ");
        Serial.println(buttonState);

        // Check if button state has changed from the last loop iteration
        if (lastButtonState == HIGH && buttonState == LOW) {  // Button press detected
            ledState = !ledState;                               // Toggle LED state
        }

        if (ledState == HIGH) {
            potValue = analogRead(A0);  // Continuously read value from potentiometer when LED is on
            analogWrite(9, potValue / 4);  // Adjust brightness continuously
            Serial.print("Pot Value: ");
            Serial.println(potValue);
        } else {
            analogWrite(9, 0);  // Adjust brightness continuously
        }

        lastButtonState = buttonState;  // Update lastButtonState to the current state
        delay(200);                     // Optional: Simple software debouncing
    }

1. æ­£ã—ã„ãƒœãƒ¼ãƒ‰ã¨ãƒãƒ¼ãƒˆã‚’é¸æŠã—ãŸå¾Œã€ã€ŒUploadã€ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦ã‚³ãƒ¼ãƒ‰ã‚’Arduinoã«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã—ã¾ã™ã€‚

2. ã‚·ãƒªã‚¢ãƒ«ãƒ¢ãƒ‹ã‚¿ã‚’é–‹ã„ã¦å‡ºåŠ›ãƒ‡ãƒ¼ã‚¿ã‚’ç¢ºèªã—ã¾ã™ã€‚ãƒœã‚¿ãƒ³ãŒæŠ¼ã•ã‚Œã¦ã„ãªã„ã¨ãã¯ã€Œ1ã€ãŒé€£ç¶šã—ã¦è¡¨ç¤ºã•ã‚Œã€æŠ¼ã•ã‚ŒãŸç¬é–“ã¯ã€Œ0ã€ãŒè¡¨ç¤ºã•ã‚Œã‚‹ã“ã¨ãŒã‚ã‹ã‚Šã¾ã™ã€‚åŒæ™‚ã«ã€ãƒãƒ†ãƒ³ã‚·ãƒ§ãƒ¡ãƒ¼ã‚¿ã‹ã‚‰ã®å€¤ã‚‚è¡¨ç¤ºã•ã‚Œã¾ã™ã€‚ãƒãƒ†ãƒ³ã‚·ãƒ§ãƒ¡ãƒ¼ã‚¿ã‚’å›ã™ã¨ã€ãã®å€¤ãŒé«˜ããªã‚‹ã»ã©LEDãŒæ˜ã‚‹ããªã‚Šã€é€†ã«ä½ããªã‚‹ã¨æš—ããªã‚Šã¾ã™ã€‚
    
.. image:: img/10_dimmer_led_serial_tool.png
    :align: center

.. note::

    ã“ã‚Œã«ã‚ˆã‚Šã€ä»¥ä¸‹ãŒæ˜ç¢ºã«ç†è§£ã§ãã‚‹ã¯ãšã§ã™ï¼š

    - ãƒ‡ã‚¸ã‚¿ãƒ«ä¿¡å·ã¯0ã¨1ã®2ã¤ã®çŠ¶æ…‹ã—ã‹æŒãŸãªã„ã€‚
    - ã‚¢ãƒŠãƒ­ã‚°ä¿¡å·ã¯0ã‹ã‚‰1023ã¾ã§ã®ç¯„å›²ã‚’æŒã¤ã€‚

3. æœ€å¾Œã«ã€ã‚³ãƒ¼ãƒ‰ã‚’ä¿å­˜ã—ã¦ä½œæ¥­ã‚¹ãƒšãƒ¼ã‚¹ã‚’æ•´ç†æ•´é “ã—ã¾ã—ã‚‡ã†ã€‚

**è³ªå•**

1. ãƒ‡ã‚¸ã‚¿ãƒ«ãƒ”ãƒ³7ã‚’å˜ã«INPUTã«è¨­å®šã—ãŸå ´åˆã€ä½•ãŒèµ·ã“ã‚‹ã§ã—ã‚‡ã†ã‹ï¼Ÿãªãœã§ã™ã‹ï¼Ÿ

.. code-block::
    :emphasize-lines: 3

    void setup() {
        pinMode(9, OUTPUT);        // Set pin 9 as output
        pinMode(7, INPUT);  // Set pin 7 as input with an internal pull-up resistor
        Serial.begin(9600);        // Serial communication setup at 9600 baud
    }

2. ãƒ”ãƒ³7ã‚’ ``INPUT`` ã«è¨­å®šã™ã‚‹ã ã‘ã®å ´åˆã€å›è·¯ã«ã¯ã©ã®ã‚ˆã†ãªèª¿æ•´ãŒå¿…è¦ã§ã™ã‹ï¼Ÿ

**ã¾ã¨ã‚**

ã“ã®ãƒ¬ãƒƒã‚¹ãƒ³ã®çµ‚ã‚ã‚Šã¾ã§ã«ã€ã‚·ãƒ³ãƒ—ãƒ«ãªãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã‚’ä»‹ã—ã¦åˆ¶å¾¡ã•ã‚Œã‚‹å®Œå…¨ãªæ©Ÿèƒ½ã‚’æŒã¤ON/OFFãƒ‡ã‚¹ã‚¯ãƒ©ãƒ³ãƒ—ãŒå®Œæˆã—ã¾ã™ã€‚ã•ã¾ã–ã¾ãªé›»å­éƒ¨å“ã®çµ±åˆã¨Arduinoãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°æŠ€è¡“ã‚’é§†ä½¿ã—ã¦ã€å®Ÿç”¨çš„ã§ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–ãªé›»å­ãƒ‡ãƒã‚¤ã‚¹ã‚’ä½œæˆã™ã‚‹æ–¹æ³•ã‚’ç¿’å¾—ã—ã¾ã™ã€‚ã“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¯ã€ã‚¨ãƒ¬ã‚¯ãƒˆãƒ­ãƒ‹ã‚¯ã‚¹ã¨ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°ã®åŸºæœ¬æ¦‚å¿µã‚’å¼·åŒ–ã™ã‚‹ã ã‘ã§ãªãã€DIYãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ã«è¿½åŠ ã§ãã‚‹æ©Ÿèƒ½çš„ãªä½œå“ã‚’æä¾›ã—ã¾ã™ã€‚
